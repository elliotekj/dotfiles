theme = "vesper"

[editor]
bufferline = "never"
color-modes = true
cursorline = false
file-picker.hidden = false
idle-timeout = 0
shell = [ "nu", "--commands" ]
text-width = 100

[editor.cursor-shape]
insert = "bar"
normal = "block"
select = "underline"

[editor.statusline.mode]
insert = "INSERT"
normal = "NORMAL"
select = "SELECT"

[editor.soft-wrap]
enable = true

[editor.whitespace.characters]
tab = "â†’"

[editor.whitespace.render]
tab = "all"

[keys.normal]
D = "extend_to_line_end"

[keys.select]
D = "extend_to_line_end"
tab = "extend_parent_node_end"
S-tab = "extend_parent_node_start"

[keys.normal.space]
space = ":fmt"
e = [
  ':sh rm -f /tmp/unique-file-h21a434',
  ':insert-output (yazi "%{buffer_name}" --chooser-file=/tmp/unique-file-h21a434)',
  ':insert-output (["\u{1b}[?1049h"] | str join "" | into binary | save --raw --force /dev/tty)',
  ':open %sh{cat /tmp/unique-file-h21a434}',
  ':redraw',
  ":reload-all"
]
w = ":w"

[keys.normal.space.t]
c = ":sh echo \"mix test %{buffer_name}:%{cursor_line}\" | pbcopy"

[keys.normal.space.x]
c = ":sh echo \"%{buffer_name}:%{cursor_line}\" | pbcopy"
C = ":sh echo \"%{buffer_name}\" | tr -d '\n' | pbcopy"
b = ":sh git blame %{buffer_name} -L %{cursor_line},%{cursor_line}"
r = [
  ":write-all",
  ':insert-output (scooter | save --raw --force /dev/tty)',
  ":redraw",
  ":reload-all"
]
  
[keys.insert]
j = { k = "normal_mode" }

[keys.normal.space.x.e]
m = '@mi{S, <ret>:sort<ret>,gl' # sort modules
s = '@s\w+:<ret>vh<esc>ms"lc =<gt><esc>,gs' # atom keys to strings
a = '@s"\w+" =<gt><ret>4hmd"lv2l<esc>c:<esc>,gs' # string keys to atoms
d = '@gs/ do$<ret>c, do:<esc>Jjxdk:format<ret>' # single-line do
D = '@gs/, do: <ret>c do<ret><esc>oend<esc>:format<ret>' # multi-line do
w = '@gsecwith<esc>gsj/ -<gt><ret>dhvgsdkf pa <lt>- <esc>gs:format<ret>' # case to with
c = '@gseccase<esc>/ <lt>- <ret>dh<A-o>do<esc>Pa -<gt> <esc>Jkgs:format<ret>' # with to case
p = '@gsf(;<A-n>d<A-p><A-p>i|<gt> <esc>3hPa <esc>x_|sd -F "(," "("<ret>gs:format<ret>' # pipe
f = '@kx_djf(pa,<esc>gsf dx_|sd -F ",)" ")"<ret>;:format<ret>' # fun calls (de-pipe)
P = '@x_|sd "\|<gt>" "|<gt>\n"<ret>;:format<ret>' # pipes on separate lines
